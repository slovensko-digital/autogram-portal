<head>
  <script src="//unpkg.com/autogram-sdk@0.0.2/dist/index.global.js"></script>

  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.data('signer', () => ({
        client: null,
        signing: false,
        signedDocument: null,
        validationLoading: true,
        validationResult: null,
        visualizationLoading: false,
        visualizationResult: null,
        showVisualization: false,
        originalFile: {
          name: '<%= j @document.filename %>',
          type: '<%= j @document.content_type %>',
          content: '<%= Base64.strict_encode64(@document.content).delete("\n") %>'
        },

        init() {
          console.log('Initializing signer ...');
          this.client = new AutogramSDK.FullClient();
          this.loadSignatureValidation();
        },

        async loadSignatureValidation() {
          try {
            const response = await fetch('<%= validate_document_path(@document) %>');
            this.validationResult = await response.json();
          } catch (error) {
            console.error('Failed to load signature validation:', error);
            this.validationResult = { errors: ['Nepodarilo sa načítať informácie o podpisoch'] };
          } finally {
            this.validationLoading = false;
          }
        },

        async loadVisualization() {
          try {
            this.visualizationLoading = true;
            const response = await fetch('<%= visualize_document_path(@document) %>');
            
            if (response.ok) {
              this.visualizationResult = await response.json();
            } else {
              const errorData = await response.json();
              this.visualizationResult = { errors: errorData.errors || ['Nepodarilo sa načítať vizualizáciu'] };
            }
          } catch (error) {
            console.error('Failed to load visualization:', error);
            this.visualizationResult = { errors: ['Nepodarilo sa načítať vizualizáciu dokumentu'] };
          } finally {
            this.visualizationLoading = false;
          }
        },

        toggleVisualization() {
          this.showVisualization = !this.showVisualization;
          if (this.showVisualization && !this.visualizationResult) {
            this.loadVisualization();
          }
        },

        isVisualizationSupported() {
          if (!this.visualizationResult || this.visualizationResult.errors) return false;
          
          const mimeType = this.visualizationResult.mimeType;
          return mimeType && (
            mimeType.includes('text/plain') || 
            mimeType.includes('text/html') || 
            mimeType.includes('application/pdf')
          );
        },

        getVisualizationContent() {
          if (!this.visualizationResult || this.visualizationResult.errors) return '';
          
          const mimeType = this.visualizationResult.mimeType;
          const content = this.visualizationResult.content;
          
          // If mime type indicates base64, decode it
          if (mimeType && mimeType.includes(';base64')) {
            try {
              // For text content, we need to handle UTF-8 encoding properly
              if (mimeType.includes('text/')) {
                // Decode base64 to bytes array
                const binaryString = atob(content);
                const bytes = new Uint8Array(binaryString.length);
                for (let i = 0; i < binaryString.length; i++) {
                  bytes[i] = binaryString.charCodeAt(i);
                }
                // Decode as UTF-8
                return new TextDecoder('utf-8').decode(bytes);
              } else {
                // For non-text content, use standard base64 decode
                return atob(content);
              }
            } catch (e) {
              console.error('Failed to decode base64 content:', e);
              return content;
            }
          }
          
          return content;
        },

        getVisualizationMimeType() {
          if (!this.visualizationResult) return '';
          
          // Remove ;base64 suffix if present
          return this.visualizationResult.mimeType?.replace(';base64', '') || '';
        },
        basename(path) {
          return path.split('/').reverse()[0];
        },
        b64toBlob(b64Data, contentType = '', sliceSize = 512) {
          const byteCharacters = atob(b64Data);
          const byteArrays = [];

          for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
            const slice = byteCharacters.slice(offset, offset + sliceSize);

            const byteNumbers = new Array(slice.length);
            for (let i = 0; i < slice.length; i++) {
              byteNumbers[i] = slice.charCodeAt(i);
            }

            const byteArray = new Uint8Array(byteNumbers);
            byteArrays.push(byteArray);
          }

          const blob = new Blob(byteArrays, {type: contentType});
          return blob;
        },
        download() {
          const blob = this.b64toBlob(this.signedDocument.content, this.signedDocument.contentType);
          if (window.navigator.msSaveOrOpenBlob) {
            window.navigator.msSaveBlob(blob, this.signedDocument.filename);
          } else {
            const elem = window.document.createElement('a');
            elem.href = window.URL.createObjectURL(blob);
            elem.download = this.signedDocument.filename;
            document.body.appendChild(elem);
            elem.click();
            document.body.removeChild(elem);
          }
        },
        async signFile(signatureLevel) {
          try {
            this.signing = true;

            const fileBasename = this.basename(this.originalFile.name);

            let levelSuffix;

            if (signatureLevel === "base") {
              levelSuffix = "B";
            } else if (signatureLevel === "timestamp") {
              levelSuffix = "T";
            } else {
              throw new Error(`Unknown signature level ${signatureLevel}`);
            }

            let level;
            let container;
            let ext;

            if (this.originalFile.type === "application/pdf") {
              level = `PAdES_BASELINE_${levelSuffix}`;
              container = null;
              ext = "pdf";
            } else {
              level = `XAdES_BASELINE_${levelSuffix}`;
              container = "ASiC_E";
              ext = "asice";
            }

            const {content} = await this.client.sign(
              {
                content: this.originalFile.content,
                filename: this.originalFile.name,
              },
              {
                level,
                container,
              },
              `${this.originalFile.type};base64`,
              false);

            const timestamp = new Date().toISOString().replace(/:/g, "-");

            this.signedDocument = {
              originalFilename: this.originalFile.name,
              filename: `${fileBasename} - signed ${timestamp}.${ext}`,
              contentType: this.originalFile.type,
              content,
            }

          } finally {
            this.signing = false;
          }
        },
      }))
    })
  </script>
</head>

<main>
  <!-- File signing section -->
  <div class="relative isolate overflow-hidden">
    <div class="mx-auto max-w-7xl px-6 pb-24 pt-10 sm:pb-40 lg:flex lg:px-8 lg:pt-15">
      <div
          class="mx-auto mt-16 flex max-w-full sm:max-w-3xl sm:mt-24 lg:ml-10 lg:mr-0 lg:mt-16 lg:max-w-none lg:flex-none xl:ml-32">
        <div
            class="flex flex-col items-center max-w-full h-auto sm:max-w-3xl mx-auto lg:max-w-none w-[1000px]"
            x-data="signer"
        >
          <!-- File Title -->
          <div class="w-full mb-6 text-center">
            <h1 class="text-3xl font-bold text-gray-900 mb-2"><%= @document.filename %></h1>
          </div>

          <!-- Signature Validation Status -->
          <div class="w-full mb-6">
            <!-- Loading state -->
            <div x-show="validationLoading" class="rounded-lg bg-gray-50 border border-gray-200 p-4">
              <div class="flex items-center">
                <svg class="animate-spin h-5 w-5 text-gray-500 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span class="text-gray-600">Overujem elektronické podpisy...</span>
              </div>
            </div>

            <!-- No signatures -->
            <div x-show="!validationLoading && validationResult && !validationResult.hasSignatures && !validationResult.errors?.length" class="rounded-lg bg-blue-50 border border-blue-200 p-4">
              <div class="flex items-center mb-2">
                <svg class="w-5 h-5 text-blue-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                </svg>
                <h3 class="text-blue-800 font-semibold">Žiadne elektronické podpisy</h3>
              </div>
              <p class="text-blue-700 text-sm">Tento dokument ešte neobsahuje elektronické podpisy. Môžete ho podpísať nižšie.</p>
            </div>

            <!-- Existing signatures -->
            <div x-show="!validationLoading && validationResult && validationResult.hasSignatures" class="rounded-lg bg-green-50 border border-green-200 p-4">
              <div class="flex items-center mb-3">
                <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                <h3 class="text-green-800 font-semibold">Elektronické podpisy nájdené</h3>
                <span x-text="`(${validationResult.signatures?.length || 0})`" class="text-green-600 ml-1"></span>
              </div>
              
              <div class="space-y-3">
                <template x-for="signature in validationResult.signatures" :key="signature.signerName + signature.signingTime">
                  <div class="bg-white rounded border border-green-200 p-3">
                    <div class="flex items-start justify-between">
                      <div class="flex-1">
                        <div class="font-medium text-gray-900" x-text="signature.signerName"></div>
                        <div class="text-sm text-gray-600">
                          <span x-text="signature.signatureLevel"></span>
                          <span x-show="signature.timestampInfo && signature.timestampInfo.qualified"> • Kvalifikovaná časová pečiatka</span>
                          <span x-show="signature.timestampInfo && signature.timestampInfo.count > 1" x-text="`(${signature.timestampInfo.count} pečiatok)`"></span>
                        </div>
                        <div class="text-sm text-gray-500" x-text="new Date(signature.signingTime).toLocaleDateString('sk-SK', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })"></div>
                      </div>
                      <div class="flex items-center">
                        <span x-show="signature.valid" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                          Platný
                        </span>
                        <span x-show="!signature.valid" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                          Neplatný
                        </span>
                      </div>
                    </div>
                    
                    <!-- Certificate details (expandable) -->
                    <details class="mt-2">
                      <summary class="text-sm text-blue-600 cursor-pointer hover:text-blue-800">Detaily certifikátu</summary>
                      <div class="mt-2 text-sm text-gray-600 space-y-1">
                        <div><strong>Subjekt:</strong> <span x-text="signature.certificateInfo.subject"></span></div>
                        <div><strong>Vydavateľ:</strong> <span x-text="signature.certificateInfo.issuer"></span></div>
                        <div x-show="signature.certificateInfo.qualification">
                          <strong>Kvalifikácia:</strong> 
                          <span x-text="signature.certificateInfo.qualification"></span>
                        </div>
                      </div>
                      
                      <!-- Timestamp details -->
                      <div x-show="signature.timestampInfo && signature.timestampInfo.timestamps" class="mt-3">
                        <strong class="text-sm text-gray-800">Časové pečiatky:</strong>
                        <template x-for="timestamp in signature.timestampInfo.timestamps" :key="timestamp.time">
                          <div class="ml-2 mt-1 text-sm text-gray-600">
                            <div><strong x-text="timestamp.type === 'SIGNATURE_TIMESTAMP' ? 'Podpis:' : 'Archív:'"></strong> <span x-text="new Date(timestamp.time).toLocaleDateString('sk-SK', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })"></span></div>
                            <div><strong>Autorita:</strong> <span x-text="timestamp.authority"></span></div>
                            <div x-show="timestamp.qualification"><strong>Kvalifikácia:</strong> <span x-text="timestamp.qualification"></span></div>
                          </div>
                        </template>
                      </div>
                    </details>
                  </div>
                </template>
              </div>
            </div>

            <!-- Validation errors -->
            <div x-show="!validationLoading && validationResult && validationResult.errors?.length" class="rounded-lg bg-red-50 border border-red-200 p-4">
              <div class="flex items-center mb-2">
                <svg class="w-5 h-5 text-red-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                </svg>
                <h3 class="text-red-800 font-semibold">Chyba pri overovaní podpisov</h3>
              </div>
              <ul class="text-red-700 text-sm space-y-1">
                <template x-for="error in validationResult.errors">
                  <li x-text="`• ${error}`"></li>
                </template>
              </ul>
            </div>
          </div>

          <!-- Document Visualization / File Display Section -->
          <div class="w-full mb-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-semibold text-gray-900">Obsah dokumentu</h3>
              <button 
                x-on:click="toggleVisualization()"
                class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                <span x-text="showVisualization ? 'Skryť obsah' : 'Zobraziť obsah'"></span>
                <svg class="ml-2 -mr-0.5 h-4 w-4 transition-transform duration-200" :class="{ 'rotate-180': showVisualization }" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </button>
            </div>

            <!-- File display (shown when visualization is hidden) -->
            <div x-show="!showVisualization" class="rounded-lg bg-white/5 ring-1 ring-white/10 h-[300px] w-full border-2 border-solid flex flex-col items-center justify-center text-2xl text-gray-700">
              <div class="flex flex-col items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                      stroke="currentColor" class="w-16 h-16">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"/>
                </svg>
                <span class="text-center text-base mt-2 text-gray-500">Súbor je pripravený na podpísanie</span>
              </div>
            </div>

            <!-- Visualization Content (shown when visualization is visible) -->
            <div x-show="showVisualization" x-transition class="border border-gray-200 rounded-lg min-h-[1000px]">
              <!-- Loading state -->
              <div x-show="visualizationLoading" class="p-4 h-[1000px] flex items-center justify-center">
                <div class="flex items-center">
                  <svg class="animate-spin h-5 w-5 text-gray-500 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  <span class="text-gray-600">Načítavam obsah dokumentu...</span>
                </div>
              </div>

              <!-- Error state -->
              <div x-show="!visualizationLoading && visualizationResult && visualizationResult.errors?.length" class="p-4 bg-yellow-50 h-[1000px] flex items-center justify-center">
                <div class="text-center">
                  <div class="flex items-center justify-center mb-2">
                    <svg class="w-5 h-5 text-yellow-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-yellow-800 font-medium">Obsah dokumentu nie je dostupný</span>
                  </div>
                  <template x-for="error in visualizationResult.errors">
                    <p class="text-yellow-700 text-sm" x-text="error"></p>
                  </template>
                </div>
              </div>

              <!-- Success state - Content display -->
              <div x-show="!visualizationLoading && visualizationResult && !visualizationResult.errors?.length && isVisualizationSupported()">
                <!-- Plain text content -->
                <div x-show="getVisualizationMimeType() === 'text/plain'" class="p-4">
                  <pre class="whitespace-pre-wrap text-sm text-gray-800 font-mono bg-gray-50 p-4 rounded border overflow-auto max-h-[970px]" x-text="getVisualizationContent()"></pre>
                </div>

                <!-- HTML content -->
                <div x-show="getVisualizationMimeType() === 'text/html'" class="p-4">
                  <div class="border rounded bg-white">
                    <iframe 
                      :srcdoc="getVisualizationContent()" 
                      class="w-full h-[970px] border-0"
                      sandbox="allow-same-origin"
                    ></iframe>
                  </div>
                </div>

                <!-- PDF content -->
                <div x-show="getVisualizationMimeType() === 'application/pdf'" class="p-4">
                  <div class="border rounded bg-white">
                    <template x-if="getVisualizationMimeType() === 'application/pdf'">
                      <embed 
                        :src="'data:application/pdf;base64,' + visualizationResult.content" 
                        type="application/pdf" 
                        class="w-full h-[970px]"
                      />
                    </template>
                  </div>
                </div>
              </div>

              <!-- Unsupported content type -->
              <div x-show="!visualizationLoading && visualizationResult && !visualizationResult.errors?.length && !isVisualizationSupported()" class="p-4 bg-gray-50 h-[1000px] flex items-center justify-center">
                <div class="flex items-center">
                  <svg class="w-5 h-5 text-gray-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                  </svg>
                  <span class="text-gray-600">
                    Náhľad obsahu nie je podporovaný pre tento typ súboru 
                    <span x-text="visualizationResult ? `(${getVisualizationMimeType()})` : ''"></span>
                  </span>
                </div>
              </div>
            </div>
          </div>

          <!-- Signed document display -->
          <div x-show="signedDocument" class="rounded-lg bg-white/5 ring-1 ring-white/10 h-[300px] w-full border-none flex flex-col items-center justify-center text-2xl text-gray-700 mt-6">
            <div class="flex flex-col items-center">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-16 h-16">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"/>
              </svg>
              <span class="font-bold text-center mt-4" x-text="signedDocument && signedDocument.filename"></span>
              <div class="mt-4 flex gap-4 items-center justify-center">
                <button
                    x-on:click.prevent="download()"
                    class="rounded-md bg-green-700 px-4 py-3 text-base font-semibold text-white shadow-sm hover:bg-green-900 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-400 inline-block text-center"
                >Stiahnuť
                </button>
                <a
                    href="<%= root_path %>"
                    class="rounded-md bg-gray-200 px-4 py-3 text-base font-semibold text-gray-900 shadow-sm hover:bg-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-400 inline-block text-center"
                >Podpísať ďalší dokument</a>
              </div>
            </div>
          </div>

          <!-- Signing progress -->
          <div x-show="signing" class="rounded-lg bg-white/5 ring-1 ring-white/10 h-[300px] w-full border-2 border-solid flex flex-col items-center justify-center text-2xl text-gray-700 mt-6">
            <div class="flex flex-col items-center">
              <svg class="animate-spin h-16 w-16" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <span class="font-bold text-center mt-4">Prebieha podpisovanie ...</span>
            </div>
          </div>

          <!-- Signature level selection -->
          <div class="mt-8" x-show="!signing && !signedDocument">
            <ul class="grid w-full gap-6 md:grid-cols-2">
              <li>
                <button
                    type="button"
                    x-on:click="signFile('base')"
                    class="inline-flex items-center justify-between w-full p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer hover:border-blue-800 hover:text-blue-800 hover:bg-gray-100"
                >
                  <div class="block">
                    <div class="w-full text-lg font-semibold">Vlastnoručný podpis</div>
                    <div class="w-full">Ako keby ste tento dokument podpísali na papieri. Bez časovej pečiatky.</div>
                  </div>
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 ms-3">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"/>
                  </svg>
                </button>
              </li>
              <li>
                <button
                    type="button"
                    x-on:click="signFile('timestamp')"
                    class="inline-flex items-center justify-between w-full p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer hover:border-blue-800 hover:text-blue-800 hover:bg-gray-100"
                >
                  <div class="block">
                    <div class="w-full text-lg font-semibold">Osvedčený podpis</div>
                    <div class="w-full">Ako keby ste podpis overili u notára. Obsahuje časovú pečiatku.</div>
                  </div>
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 ms-3">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"/>
                  </svg>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
