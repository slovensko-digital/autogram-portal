<%=  turbo_stream_from @session %>
<div class="space-y-6 bg-purple-50 border border-purple-200 rounded-lg p-6">
  <div class="text-center">
    <p class="text-sm text-gray-600 mb-6 hidden md:block">
      <%= t('.scan_qr_desktop') %>
    </p>
    <p class="text-sm text-gray-600 mb-6 md:hidden">
      <%= t('.scan_qr_mobile') %>
    </p>
  </div>

  <div class="flex justify-center">
    <a href="<%= @session.eidentita_url %>" 
      class="block hover:opacity-80 transition-opacity duration-200 focus:ring-4 focus:ring-purple-300 focus:outline-none rounded-lg"
      target="_blank"
      rel="noopener noreferrer"
      title="Kliknite pre otvorenie Eidentita aplikÃ¡cie">
      <div class="bg-white p-4 rounded-lg border-2 border-dashed border-purple-300 hover:border-purple-400 transition-colors duration-200">
        <%= qr_code_svg(@session.eidentita_url, size: 200) %>
      </div>
    </a>
  </div>

  <div class="text-center">
    <p class="text-xs text-gray-500 mb-2"><%= t('.copy_url') %></p>
    <div class="bg-gray-100 rounded p-2 text-xs font-mono break-all">
      <a href="<%= @session.eidentita_url %>" class="text-purple-600 hover:text-purple-800" target="_blank" rel="noopener noreferrer">
        <%= @session.eidentita_url %>
      </a>
    </div>
  </div>

  <div class="text-center text-xs text-gray-500 space-y-1">
    <p class="hidden md:block"><%= t('.note_desktop') %></p>
    <p class="md:hidden"><%= t('.note_mobile') %></p>
    <p><%= t('.expiry') %></p>
  </div>

  <div class="text-center">
    <%= link_to signature_actions_contract_path(@contract, recipient: @recipient),
                class: "inline-flex items-center px-3 py-2 border border-red-300 text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" do %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
      <%= t('.cancel') %>
    <% end %>
  </div>
</div>
